{"filter":false,"title":"controller.js","tooltip":"/js/controller.js","undoManager":{"mark":83,"position":83,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":63}},"text":"var app = angular.module(\"CotizadorEscuela\", ['ui.bootstrap']);"},{"action":"insertText","range":{"start":{"row":0,"column":63},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":148,"column":0}},"lines":[" ","app.controller(\"CotizadorCtrl\", ['$scope', function($scope) {","    $scope.titulo = textos[lang][\"titulo\"];","    $scope.intro = textos[lang][\"intro\"];","    $scope.btnAnadirClase = textos[lang][\"btnAnadirClase\"];","    $scope.btnEnviarConsulta = textos[lang][\"btnEnviarConsulta\"];","    $scope.eliminar = textos[lang][\"eliminar\"];","","    $scope.titTipoClase = textos[lang][\"titTipoClase\"];","    $scope.titCantidadPersonas = textos[lang][\"titCantidadPersonas\"];","    $scope.titFechaInicio = textos[lang][\"titFechaInicio\"];","    $scope.titCantidadDias = textos[lang][\"titCantidadDias\"];","    $scope.titDuracionClase = textos[lang][\"titDuracionClase\"];","    $scope.titCosto = textos[lang][\"titCosto\"];","    ","    $scope.labelNombre = textos[lang][\"nombre\"];","    $scope.labelEmail = textos[lang][\"email\"];","    ","    $scope.alerts = [];","    $scope.isCollapsed = true;","    ","    if(location.search.indexOf('mailEnviado=1') >- 1)","        $scope.aviso = textos[lang][\"avisoMailEnviado\"];","\t","\t$scope.tiposDeClase = [{id: \"InstructorPrivado\", descripcion: textos[lang][\"InstructorPrivado\"]}, ","                            {id: \"ClasesParticulares\", descripcion: textos[lang][\"ClasesParticulares\"]}, ","                            {id: \"ClasesGrupalesAdultos\", descripcion: textos[lang][\"ClasesGrupalesAdultos\"]}, ","                            {id: \"EscuelaEsquiNinos\", descripcion: textos[lang][\"EscuelaEsquiNinos\"]}, ","                            {id: \"EscuelaSnowboardNinos\", descripcion: textos[lang][\"EscuelaSnowboardNinos\"]}, ","                            {id: \"CapacidadesDiferentes\", descripcion: textos[lang][\"CapacidadesDiferentes\"]}, ","                            {id: \"EsquiDeFondo\", descripcion: textos[lang][\"EsquiDeFondo\"]},","                            {id: \"ClinicasDeSnowpark\", descripcion: textos[lang][\"ClinicasDeSnowpark\"]},","                            {id: \"Guarderia\", descripcion: textos[lang][\"Guarderia\"]}];","                           ","\t$scope.clases = [];","\t$scope.fechaMin = new Date(2014, 05, 20, 0, 0, 0, 0); //20 de Junio - ojo con los meses!","\t$scope.fechaMax = new Date(2014, 09, 06, 0, 0, 0, 0); //06 de Octubre - ojo con los meses!","\t","\t$scope.addClase = function()","\t{","\t    var size = _.size($scope.clases);","\t    if(size == 0)","\t        $scope.clases.push(new Clase(0));","\t    else","\t        $scope.clases.push(new Clase(parseInt($scope.clases[size-1].id) + 1));","\t};","\t","\t$scope.removeClase = function(id)","\t{","\t    $scope.clases = _.reject($scope.clases, function(clase){ return clase.id == id; });","\t    $scope.$emit('actualizarTotal');","\t};","\t","\t$scope.enviarMail = function()","\t{","\t    $scope.alerts = [];","\t    if ( ($.trim($scope.nombre) == \"\") || ($.trim($scope.email) == \"\") )","\t    {","\t        $scope.alerts.push({msg: textos[lang][\"datosIncompletos\"]});","\t        return false;","\t    }","\t    ","\t    if(parseInt($scope.total) == 0)","\t    {","\t        $scope.alerts.push({msg: textos[lang][\"datosClasesIncompletos\"]});","\t        return false;","\t    }","","\t    $scope.mensaje = \"\";","\t    ","\t    $($scope.clases).each(function(){","\t            $scope.mensaje += this.toString();","\t       });","\t    ","\t    $scope.mensaje += \"\\n TOTAL: $\" + $scope.total;","\t    ","\t    var templateMail = \"Template mail\\n\";","\t    templateMail += $scope.nombre + \"\\n\";","\t    templateMail += $scope.email + \"\\n\\n\";","\t    templateMail += $scope.mensaje;","\t    ","\t    alert(templateMail);","\t    ","\t    $scope.alerts.push({type:\"success\", msg: textos[lang][\"avisoMailEnviado\"]});","\t    //frmCotizadorClases.submit();","\t};","\t","\t$scope.closeAlert = function(index) {","        $scope.alerts.splice(index, 1);","    };","    ","    function CollapseDemoCtrl($scope) {","        $scope.isCollapsed = false;","    }","\t","\t$scope.total = 0;","\t$scope.$on('actualizarTotal', function(event) {","        $scope.total = _.reduce($scope.clases, function(memo, item){ return memo + parseInt(item.precio); }, 0);","    });","\t","\t$scope.addClase();","}]);","","app.controller(\"ClasesCtrl\", ['$scope', function($scope) {","  ","    $scope.$watch('clases[$index].precio',","      function(newval, oldval, scope, index) {","            $scope.$emit('actualizarTotal');","    }, true);","    ","    $scope.$watchCollection('[clases[$index].fechaInicio, clases[$index].tipo]',","      function(newval, oldval, scope) {","        if(\"ClasesGrupalesAdultos,EscuelaEsquiNinos,EscuelaSnowboardNinos\".indexOf(scope.clase.tipo) > -1){","            var d = new Date(scope.clase.fechaInicio);","            if((scope.clase.fechaInicio != \"\")&&(d.getDay() != 0) && (d.getDay() != 1)){","                alert(\"El tipo de clase '\"+scope.clase.tipodesc+\"' solo puede comenzar un dia Domingo o Lunes. Por favor seleccione otra fecha de inicio\");","                scope.clase.fechaInicio = \"\";","            }","        }","    });","    ","    $scope.open = function($event) {","        $event.preventDefault();","        $event.stopPropagation();","        $scope.opened = true;","    };","    ","    $scope.selTipo = function(tipo) {","        $scope.openTipo = false;","        $scope.clase.tipo = tipo.id;","        $scope.clase.tipodesc = tipo.descripcion;","        $scope.clase.actualizarListas();","        $scope.clase.actualizarPrecio();","    };","    ","    $scope.selCantPer = function(cant) {","        $scope.openCantPer = false;","        $scope.clase.cantidadPersonas = cant;","        $scope.clase.actualizarPrecio();","    };","    ","    $scope.selDuracion = function(dur) {","        $scope.openDur = false;","        $scope.clase.duracion = dur.id;","        $scope.clase.duracionDesc = dur.descripcion;","        $scope.clase.actualizarPrecio();","    };"]},{"action":"insertText","range":{"start":{"row":148,"column":0},"end":{"row":148,"column":4}},"text":"}]);"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":26},"end":{"row":0,"column":42}},"text":"CotizadorEscuela"},{"action":"insertText","range":{"start":{"row":0,"column":26},"end":{"row":0,"column":27}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":27},"end":{"row":0,"column":28}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":28},"end":{"row":0,"column":29}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":29},"end":{"row":0,"column":30}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":30},"end":{"row":0,"column":31}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":31},"end":{"row":0,"column":32}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":32},"end":{"row":0,"column":33}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":2,"column":16},"end":{"row":2,"column":25}},"text":"Cotizador"},{"action":"insertText","range":{"start":{"row":2,"column":16},"end":{"row":2,"column":17}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":17},"end":{"row":2,"column":18}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":18},"end":{"row":2,"column":19}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":19},"end":{"row":2,"column":20}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":20},"end":{"row":2,"column":21}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":21},"end":{"row":2,"column":22}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":22},"end":{"row":2,"column":23}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":0},"end":{"row":17,"column":46}},"text":"    $scope.labelEmail = textos[lang][\"email\"];"},{"action":"removeLines","range":{"start":{"row":4,"column":0},"end":{"row":17,"column":0}},"nl":"\n","lines":["    $scope.intro = textos[lang][\"intro\"];","    $scope.btnAnadirClase = textos[lang][\"btnAnadirClase\"];","    $scope.btnEnviarConsulta = textos[lang][\"btnEnviarConsulta\"];","    $scope.eliminar = textos[lang][\"eliminar\"];","","    $scope.titTipoClase = textos[lang][\"titTipoClase\"];","    $scope.titCantidadPersonas = textos[lang][\"titCantidadPersonas\"];","    $scope.titFechaInicio = textos[lang][\"titFechaInicio\"];","    $scope.titCantidadDias = textos[lang][\"titCantidadDias\"];","    $scope.titDuracionClase = textos[lang][\"titDuracionClase\"];","    $scope.titCosto = textos[lang][\"titCosto\"];","    ","    $scope.labelNombre = textos[lang][\"nombre\"];"]},{"action":"removeText","range":{"start":{"row":3,"column":4},"end":{"row":3,"column":43}},"text":"$scope.titulo = textos[lang][\"titulo\"];"},{"action":"removeText","range":{"start":{"row":3,"column":4},"end":{"row":4,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":4,"column":0},"end":{"row":4,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":3,"column":4},"end":{"row":4,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":4,"column":0},"end":{"row":4,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":3,"column":4},"end":{"row":4,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":23,"column":0},"end":{"row":23,"column":1}},"text":"\t"},{"action":"removeLines","range":{"start":{"row":7,"column":0},"end":{"row":23,"column":0}},"nl":"\n","lines":["        $scope.aviso = textos[lang][\"avisoMailEnviado\"];","\t","\t$scope.tiposDeClase = [{id: \"InstructorPrivado\", descripcion: textos[lang][\"InstructorPrivado\"]}, ","                            {id: \"ClasesParticulares\", descripcion: textos[lang][\"ClasesParticulares\"]}, ","                            {id: \"ClasesGrupalesAdultos\", descripcion: textos[lang][\"ClasesGrupalesAdultos\"]}, ","                            {id: \"EscuelaEsquiNinos\", descripcion: textos[lang][\"EscuelaEsquiNinos\"]}, ","                            {id: \"EscuelaSnowboardNinos\", descripcion: textos[lang][\"EscuelaSnowboardNinos\"]}, ","                            {id: \"CapacidadesDiferentes\", descripcion: textos[lang][\"CapacidadesDiferentes\"]}, ","                            {id: \"EsquiDeFondo\", descripcion: textos[lang][\"EsquiDeFondo\"]},","                            {id: \"ClinicasDeSnowpark\", descripcion: textos[lang][\"ClinicasDeSnowpark\"]},","                            {id: \"Guarderia\", descripcion: textos[lang][\"Guarderia\"]}];","                           ","\t$scope.clases = [];","\t$scope.fechaMin = new Date(2014, 05, 20, 0, 0, 0, 0); //20 de Junio - ojo con los meses!","\t$scope.fechaMax = new Date(2014, 09, 06, 0, 0, 0, 0); //06 de Octubre - ojo con los meses!","\t"]},{"action":"removeText","range":{"start":{"row":6,"column":4},"end":{"row":6,"column":53}},"text":"if(location.search.indexOf('mailEnviado=1') >- 1)"},{"action":"removeText","range":{"start":{"row":6,"column":4},"end":{"row":7,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":6,"column":14},"end":{"row":6,"column":19}},"text":"Clase"},{"action":"insertText","range":{"start":{"row":6,"column":14},"end":{"row":6,"column":15}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":15},"end":{"row":6,"column":16}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":16},"end":{"row":6,"column":17}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":17},"end":{"row":6,"column":18}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":18},"end":{"row":6,"column":19}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":4},"end":{"row":3,"column":23}},"text":"$scope.alerts = [];"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":23},"end":{"row":4,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":4,"column":0},"end":{"row":4,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":3,"column":11},"end":{"row":3,"column":17}},"text":"alerts"},{"action":"insertText","range":{"start":{"row":3,"column":11},"end":{"row":3,"column":12}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":12},"end":{"row":3,"column":13}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":13},"end":{"row":3,"column":14}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":14},"end":{"row":3,"column":15}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":15},"end":{"row":3,"column":16}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":16},"end":{"row":3,"column":17}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":9,"column":30},"end":{"row":9,"column":36}},"text":"clases"},{"action":"insertText","range":{"start":{"row":9,"column":30},"end":{"row":9,"column":31}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":31},"end":{"row":9,"column":32}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":32},"end":{"row":9,"column":33}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":33},"end":{"row":9,"column":34}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":9,"column":30},"end":{"row":9,"column":34}},"text":"alar"},{"action":"insertText","range":{"start":{"row":9,"column":30},"end":{"row":9,"column":36}},"text":"alarms"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":16},"end":{"row":11,"column":22}},"text":"clases"},{"action":"insertText","range":{"start":{"row":11,"column":16},"end":{"row":11,"column":22}},"text":"alarms"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":32},"end":{"row":11,"column":37}},"text":"Clase"},{"action":"insertText","range":{"start":{"row":11,"column":32},"end":{"row":11,"column":33}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":33},"end":{"row":11,"column":34}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":11,"column":34},"end":{"row":11,"column":35}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":32},"end":{"row":11,"column":35}},"text":"Ala"},{"action":"insertText","range":{"start":{"row":11,"column":32},"end":{"row":11,"column":38}},"text":"Alarma"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":11,"column":37},"end":{"row":11,"column":38}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":13,"column":32},"end":{"row":13,"column":37}},"text":"Clase"},{"action":"insertText","range":{"start":{"row":13,"column":32},"end":{"row":13,"column":37}},"text":"Alarm"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":13,"column":16},"end":{"row":13,"column":22}},"text":"clases"},{"action":"insertText","range":{"start":{"row":13,"column":16},"end":{"row":13,"column":22}},"text":"alarms"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":13,"column":54},"end":{"row":13,"column":60}},"text":"clases"},{"action":"insertText","range":{"start":{"row":13,"column":54},"end":{"row":13,"column":60}},"text":"alarms"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":16,"column":14},"end":{"row":16,"column":19}},"text":"Clase"},{"action":"insertText","range":{"start":{"row":16,"column":14},"end":{"row":16,"column":15}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":15},"end":{"row":16,"column":16}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":16},"end":{"row":16,"column":17}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":17},"end":{"row":16,"column":18}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":18},"end":{"row":16,"column":19}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":12},"end":{"row":18,"column":18}},"text":"clases"},{"action":"insertText","range":{"start":{"row":18,"column":12},"end":{"row":18,"column":18}},"text":"alarms"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":37},"end":{"row":18,"column":43}},"text":"clases"},{"action":"insertText","range":{"start":{"row":18,"column":37},"end":{"row":18,"column":43}},"text":"alarms"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":54},"end":{"row":18,"column":59}},"text":"clase"},{"action":"insertText","range":{"start":{"row":18,"column":54},"end":{"row":18,"column":55}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":55},"end":{"row":18,"column":56}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":56},"end":{"row":18,"column":57}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":57},"end":{"row":18,"column":58}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":58},"end":{"row":18,"column":59}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":58},"end":{"row":18,"column":59}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":57},"end":{"row":18,"column":58}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":57},"end":{"row":18,"column":58}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":58},"end":{"row":18,"column":59}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":69},"end":{"row":18,"column":74}},"text":"clase"},{"action":"insertText","range":{"start":{"row":18,"column":69},"end":{"row":18,"column":74}},"text":"alarm"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":5},"end":{"row":19,"column":6}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":6},"end":{"row":19,"column":7}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":0},"end":{"row":54,"column":3}},"text":"\t};"},{"action":"removeLines","range":{"start":{"row":22,"column":0},"end":{"row":54,"column":0}},"nl":"\n","lines":["\t$scope.enviarMail = function()","\t{","\t    $scope.alerts = [];","\t    if ( ($.trim($scope.nombre) == \"\") || ($.trim($scope.email) == \"\") )","\t    {","\t        $scope.alerts.push({msg: textos[lang][\"datosIncompletos\"]});","\t        return false;","\t    }","\t    ","\t    if(parseInt($scope.total) == 0)","\t    {","\t        $scope.alerts.push({msg: textos[lang][\"datosClasesIncompletos\"]});","\t        return false;","\t    }","","\t    $scope.mensaje = \"\";","\t    ","\t    $($scope.clases).each(function(){","\t            $scope.mensaje += this.toString();","\t       });","\t    ","\t    $scope.mensaje += \"\\n TOTAL: $\" + $scope.total;","\t    ","\t    var templateMail = \"Template mail\\n\";","\t    templateMail += $scope.nombre + \"\\n\";","\t    templateMail += $scope.email + \"\\n\\n\";","\t    templateMail += $scope.mensaje;","\t    ","\t    alert(templateMail);","\t    ","\t    $scope.alerts.push({type:\"success\", msg: textos[lang][\"avisoMailEnviado\"]});","\t    //frmCotizadorClases.submit();"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":23,"column":0},"end":{"row":23,"column":1}},"text":"\t"},{"action":"removeLines","range":{"start":{"row":22,"column":0},"end":{"row":23,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":22,"column":0},"end":{"row":23,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":28,"column":0},"end":{"row":28,"column":5}},"text":"    }"},{"action":"removeLines","range":{"start":{"row":25,"column":0},"end":{"row":28,"column":0}},"nl":"\n","lines":["    ","    function CollapseDemoCtrl($scope) {","        $scope.isCollapsed = false;"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":26,"column":0},"end":{"row":26,"column":1}},"text":"\t"},{"action":"removeLines","range":{"start":{"row":25,"column":0},"end":{"row":26,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":0},"end":{"row":31,"column":19}},"text":"\t$scope.addClase();"},{"action":"removeLines","range":{"start":{"row":26,"column":0},"end":{"row":31,"column":0}},"nl":"\n","lines":["\t$scope.total = 0;","\t$scope.$on('actualizarTotal', function(event) {","        $scope.total = _.reduce($scope.clases, function(memo, item){ return memo + parseInt(item.precio); }, 0);","    });","\t"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":25,"column":0},"end":{"row":26,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":24,"column":6},"end":{"row":25,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":27,"column":16},"end":{"row":27,"column":22}},"text":"Clases"},{"action":"insertText","range":{"start":{"row":27,"column":16},"end":{"row":27,"column":17}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":17},"end":{"row":27,"column":18}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":18},"end":{"row":27,"column":19}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":19},"end":{"row":27,"column":20}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":20},"end":{"row":27,"column":21}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":0},"end":{"row":32,"column":13}},"text":"    }, true);"},{"action":"removeLines","range":{"start":{"row":28,"column":0},"end":{"row":32,"column":0}},"nl":"\n","lines":["  ","    $scope.$watch('clases[$index].precio',","      function(newval, oldval, scope, index) {","            $scope.$emit('actualizarTotal');"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":29,"column":0},"end":{"row":29,"column":4}},"text":"    "},{"action":"removeLines","range":{"start":{"row":28,"column":0},"end":{"row":29,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":66,"column":0},"end":{"row":66,"column":4}},"text":"}]);"},{"action":"removeLines","range":{"start":{"row":27,"column":0},"end":{"row":66,"column":0}},"nl":"\n","lines":["app.controller(\"AlarmCtrl\", ['$scope', function($scope) {","","    $scope.$watchCollection('[clases[$index].fechaInicio, clases[$index].tipo]',","      function(newval, oldval, scope) {","        if(\"ClasesGrupalesAdultos,EscuelaEsquiNinos,EscuelaSnowboardNinos\".indexOf(scope.clase.tipo) > -1){","            var d = new Date(scope.clase.fechaInicio);","            if((scope.clase.fechaInicio != \"\")&&(d.getDay() != 0) && (d.getDay() != 1)){","                alert(\"El tipo de clase '\"+scope.clase.tipodesc+\"' solo puede comenzar un dia Domingo o Lunes. Por favor seleccione otra fecha de inicio\");","                scope.clase.fechaInicio = \"\";","            }","        }","    });","    ","    $scope.open = function($event) {","        $event.preventDefault();","        $event.stopPropagation();","        $scope.opened = true;","    };","    ","    $scope.selTipo = function(tipo) {","        $scope.openTipo = false;","        $scope.clase.tipo = tipo.id;","        $scope.clase.tipodesc = tipo.descripcion;","        $scope.clase.actualizarListas();","        $scope.clase.actualizarPrecio();","    };","    ","    $scope.selCantPer = function(cant) {","        $scope.openCantPer = false;","        $scope.clase.cantidadPersonas = cant;","        $scope.clase.actualizarPrecio();","    };","    ","    $scope.selDuracion = function(dur) {","        $scope.openDur = false;","        $scope.clase.duracion = dur.id;","        $scope.clase.duracionDesc = dur.descripcion;","        $scope.clase.actualizarPrecio();","    };"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":26,"column":0},"end":{"row":27,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":25,"column":4},"end":{"row":26,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":2,"column":21},"end":{"row":2,"column":22}},"text":"a"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":21},"end":{"row":2,"column":21},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1406730687948,"hash":"e2031320ec9ee4de27bb07313517c08d0f1ad5ac"}